<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SimpleGEL: Benchmark Operations</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SimpleGEL
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Benchmark Operations</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbench.html">bench</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga8bc29fbb9fa0d77c9c4bdce56bad84cb"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structbench.html">bench</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__benchs.html#ga8bc29fbb9fa0d77c9c4bdce56bad84cb">bench_t</a></td></tr>
<tr class="separator:ga8bc29fbb9fa0d77c9c4bdce56bad84cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga3423f563d8320928f0c937ae854a8c2d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__benchs.html#ga3423f563d8320928f0c937ae854a8c2d">bench_init</a> (<a class="el" href="group__benchs.html#ga8bc29fbb9fa0d77c9c4bdce56bad84cb">bench_t</a> *b)</td></tr>
<tr class="separator:ga3423f563d8320928f0c937ae854a8c2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga58f7a2e9cd909e8c5b9104659a3587d5"><td class="memItemLeft" align="right" valign="top">__inline__ void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__benchs.html#ga58f7a2e9cd909e8c5b9104659a3587d5">bench_start</a> (<a class="el" href="group__benchs.html#ga8bc29fbb9fa0d77c9c4bdce56bad84cb">bench_t</a> *b)</td></tr>
<tr class="separator:ga58f7a2e9cd909e8c5b9104659a3587d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa5ab6277006aebcde85c3deeb1086560"><td class="memItemLeft" align="right" valign="top">__inline__ void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__benchs.html#gaa5ab6277006aebcde85c3deeb1086560">bench_stop</a> (<a class="el" href="group__benchs.html#ga8bc29fbb9fa0d77c9c4bdce56bad84cb">bench_t</a> *b)</td></tr>
<tr class="separator:gaa5ab6277006aebcde85c3deeb1086560"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga20a9f5029eb8efea7be4f9bcdbb32176"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__benchs.html#ga20a9f5029eb8efea7be4f9bcdbb32176">bench_report</a> (<a class="el" href="group__benchs.html#ga8bc29fbb9fa0d77c9c4bdce56bad84cb">bench_t</a> *b, const char *msg,...)</td></tr>
<tr class="separator:ga20a9f5029eb8efea7be4f9bcdbb32176"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaad2929a69d1228e2ca9246512acd9ef2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__benchs.html#gaad2929a69d1228e2ca9246512acd9ef2">bench_empty</a> (<a class="el" href="group__benchs.html#ga8bc29fbb9fa0d77c9c4bdce56bad84cb">bench_t</a> *b)</td></tr>
<tr class="separator:gaad2929a69d1228e2ca9246512acd9ef2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The benchmark functions are designed to benchmark some piece of code in a precise and deterministic manner. Interrupts are masked during the benchmark. The benchmark uses the free running counter that exists in 68HC11 and 68HC12 (see <code>get_timer_counter</code> ). The implementation assumes that the free running counter can overflow only once during a benchmark. This imposes a restrictions on the benchmarked operation: they must be fast enough to not exceed 65536 times the update of the free running counter. For example on a 68HC11 @ 8Mhz they should not exceed 32ms.</p>
<p>The benchmark data is recorded in the <code>bench_t</code> data type. It must be initialized using <code>bench_init</code>. For example:</p>
<pre>
    bench_t b;</pre><pre>    bench_init (&amp;b);
</pre><p>Then, the piece of code that must be benchmarked is enclosed by calls to <code>bench_start</code> and <code>bench_stop</code> as follows:</p>
<pre>
    bench_start (&amp;b);
    ...
    bench_stop (&amp;b);
    bench_report (&amp;b, "Operation");
</pre><p>The <code>bench_report</code> function must be called to compute the time and print the result. </p>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga8bc29fbb9fa0d77c9c4bdce56bad84cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8bc29fbb9fa0d77c9c4bdce56bad84cb">&#9670;&nbsp;</a></span>bench_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structbench.html">bench</a> <a class="el" href="group__benchs.html#ga8bc29fbb9fa0d77c9c4bdce56bad84cb">bench_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaad2929a69d1228e2ca9246512acd9ef2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaad2929a69d1228e2ca9246512acd9ef2">&#9670;&nbsp;</a></span>bench_empty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bench_empty </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__benchs.html#ga8bc29fbb9fa0d77c9c4bdce56bad84cb">bench_t</a> *&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Benchmark overhead computation.</p>
<p>This function computes the overhead of the benchmark operations <code>bench_start</code> and <code>bench_stop</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td>pointer to benchmark record object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__benchs.html#ga3423f563d8320928f0c937ae854a8c2d">bench_init</a> </dd></dl>

</div>
</div>
<a id="ga3423f563d8320928f0c937ae854a8c2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3423f563d8320928f0c937ae854a8c2d">&#9670;&nbsp;</a></span>bench_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bench_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__benchs.html#ga8bc29fbb9fa0d77c9c4bdce56bad84cb">bench_t</a> *&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize the benchmark object.</p>
<p>This function must be called to initialize the benchmark object. It locks the interrupts and computes the benchmark correction that will be applied to the results. The benchmark correction is based on the benchmark operations overhead computed using <code>bench_empty</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td>pointer to benchmark record object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__benchs.html#ga58f7a2e9cd909e8c5b9104659a3587d5">bench_start</a>, <a class="el" href="group__benchs.html#gaa5ab6277006aebcde85c3deeb1086560">bench_stop</a>, <a class="el" href="group__benchs.html#gaad2929a69d1228e2ca9246512acd9ef2">bench_empty</a> </dd></dl>

</div>
</div>
<a id="ga20a9f5029eb8efea7be4f9bcdbb32176"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga20a9f5029eb8efea7be4f9bcdbb32176">&#9670;&nbsp;</a></span>bench_report()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bench_report </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__benchs.html#ga8bc29fbb9fa0d77c9c4bdce56bad84cb">bench_t</a> *&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Report benchmark results.</p>
<p>This function computes the time spent between the <code>bench_start</code> and <code>bench_stop</code> calls. It then reports the result.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td>pointer to benchmark record object </td></tr>
    <tr><td class="paramname">msg</td><td>format description string </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__benchs.html#ga58f7a2e9cd909e8c5b9104659a3587d5">bench_start</a>, <a class="el" href="group__benchs.html#gaa5ab6277006aebcde85c3deeb1086560">bench_stop</a> </dd></dl>

</div>
</div>
<a id="ga58f7a2e9cd909e8c5b9104659a3587d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga58f7a2e9cd909e8c5b9104659a3587d5">&#9670;&nbsp;</a></span>bench_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__inline__ void bench_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__benchs.html#ga8bc29fbb9fa0d77c9c4bdce56bad84cb">bench_t</a> *&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Start the benchmark.</p>
<p>This function starts the benchmark operation by recording the precise time at which the measure begins.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td>pointer to benchmark record object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__benchs.html#gaa5ab6277006aebcde85c3deeb1086560">bench_stop</a>, <a class="el" href="group__benchs.html#ga3423f563d8320928f0c937ae854a8c2d">bench_init</a> </dd></dl>

</div>
</div>
<a id="gaa5ab6277006aebcde85c3deeb1086560"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa5ab6277006aebcde85c3deeb1086560">&#9670;&nbsp;</a></span>bench_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__inline__ void bench_stop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__benchs.html#ga8bc29fbb9fa0d77c9c4bdce56bad84cb">bench_t</a> *&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stop the benchmark.</p>
<p>This function finishes the benchmark operation by recording the precise time at which the measure stops.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td>pointer to benchmark record object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__benchs.html#ga58f7a2e9cd909e8c5b9104659a3587d5">bench_start</a>, <a class="el" href="group__benchs.html#ga3423f563d8320928f0c937ae854a8c2d">bench_init</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Nov 10 2023 12:17:09 for SimpleGEL by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
